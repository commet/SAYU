# SAYU 스마트 챗봇 시스템 가이드

## 개요
SAYU의 AI 큐레이터 챗봇이 더 스마트하고 매력적으로 업그레이드되었습니다!

## 주요 기능

### 1. 페이지별 맞춤 인사말 🎯
챗봇이 현재 페이지의 컨텍스트를 이해하고 적절한 인사말로 대화를 시작합니다.

- **홈페이지**: "안녕하세요! SAYU에 오신 걸 환영해요 ✨"
- **퀴즈 페이지**: "성격 유형 테스트를 시작하시는군요! 🎨"
- **갤러리**: "멋진 작품들이 가득하네요! 🖼️"
- **작품 상세**: "[작품명]을(를) 감상하고 계시네요"
- **프로필**: "당신의 예술 취향을 함께 살펴볼까요? 📊"

### 2. 점진적 노출 전략 ⏰
페이지에 머무는 시간에 따라 챗봇이 단계적으로 존재감을 드러냅니다.

**단계별 행동:**
- **0-5초** (subtle): 작은 플로팅 버튼, 부드러운 펄스 애니메이션
- **5-15초** (notice): 바운스 애니메이션, 작은 말풍선 표시
- **15-30초** (engage): 흔들기 애니메이션, 인사 말풍선
- **30초+** (active): 적극적인 도움 제안, 컨텍스트 기반 힌트

### 3. 미판정 유저 경험 🎭
성격 유형이 결정되지 않은 사용자를 위한 특별한 경험:

- **신비로운 실루엣 캐릭터**: 물음표와 그라데이션 효과
- **호기심 유발 메시지**: "나는 누구일까요? 🤔"
- **변신 애니메이션**: 퀴즈 완료 시 화려한 변신 효과

## 사용 방법

### 기본 통합
```tsx
// app/layout.tsx
import { SmartChatbot } from '@/components/chatbot/SmartChatbot';

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        {children}
        <SmartChatbot />
      </body>
    </html>
  );
}
```

### 커스텀 설정
```tsx
<SmartChatbot 
  position="bottom-left"  // 위치 설정
  initialDelay={3000}     // 초기 지연 시간
  enableTrails={true}     // 트레일 효과
/>
```

## 컴포넌트 구조

### SmartChatbot
메인 컨테이너 - 모든 로직을 관리합니다.
- 페이지 컨텍스트 감지
- 시간별 노출 전략 적용
- 사용자 상태 관리

### MysteryCharacter
미판정 유저를 위한 신비로운 캐릭터
- 진행도 표시
- 힌트 로테이션
- 변신 애니메이션

### ArtCuratorChatbot
실제 대화 인터페이스
- 페이지별 맞춤 인사
- 성격별 대화 스타일
- 에러 처리 및 로딩 상태

## 성능 최적화

### 구현된 최적화
1. **메모리 관리**: 30분 세션 타임아웃, 메시지 수 제한
2. **지연 로딩**: 컴포넌트 필요시에만 로드
3. **캐싱**: 자주 사용되는 응답 캐싱
4. **디바운싱**: 사용자 입력 최적화

### 추가 최적화 옵션
```tsx
// chatbot-performance.ts 유틸리티 사용
import { MessageCache, MemoryManager } from '@/lib/chatbot-performance';

const cache = new MessageCache(100, 5 * 60 * 1000);
const memoryManager = new MemoryManager();
```

## 접근성

- 키보드 네비게이션 지원
- 스크린 리더 호환
- 모션 감소 설정 지원
- 고대비 모드

## 트러블슈팅

### 챗봇이 표시되지 않을 때
1. `useUserProfile` 훅이 제대로 작동하는지 확인
2. 경로 감지가 올바른지 확인
3. 콘솔 에러 확인

### 인사말이 잘못 표시될 때
1. `chatbot-context.ts`의 PAGE_GREETINGS 확인
2. 페이지 타입 감지 로직 확인
3. 메타데이터 전달 확인

## 향후 개선 계획

1. **음성 인터랙션**: 음성으로 대화하기
2. **멀티모달 지원**: 이미지 인식 및 분석
3. **오프라인 모드**: 기본 기능 오프라인 지원
4. **그룹 챗**: 다른 사용자와 함께 감상